# 基本数据类型
C++定义了一套包括**算数类型（arithmetic type）**和**空类型（void）**在内的基本数据类型。其中算术类型包含了字符、整型数、布尔值和浮点数。空类型不对应具体的值，仅用于一些特殊的场合。



## 算术类型
算术类型分为两类：
* 整型（包括字符和布尔类型）
* 浮点型

下表列出了C++标准规定的尺寸的最小值，同时允许编译器赋予这些类型更大的尺寸。
|类型|含义|最小尺寸|
|---|---|---|
|bool|布尔类型|未定义|
|char|字符|8位|
|wchar_t|宽字符|16位|
|char16_t|Unicode字符|16位|
|char32_t|Unicode字符|32位|
|short|短整型|16位|
|int|整型|16位|
|long|长整型|32位|
|long long|长整型|64位|
|float|单精度浮点数|6位有效数字|
|double|双精度浮点数|10位有效数字|
|long double|扩展精度浮点数|10位有效数字|

### 字符类型
* 一个char的空间应确保可以存放机器基本字符集中任意字符对应的数字值。
* wchar_t类型用于确保可以存放机器最大扩展字符集中的任意一个字符。
* 类型char16_t和char32_t为Unicode字符集服务。

### 整型
C++语言规定：
* 一个int至少和一个short一样大
* 一个long至少和一个int一样大
* 一个long long至少和一个long一样大

### 浮点型
通常：
* float以1个字（32比特）来表示，有7个有效位
* double以2个字（64比特）来表示，有16个有效位
* long double以3或4个字（96或128比特）来表示，被用于有特殊浮点需求的硬件

### 带符号类型和无符号类型
除去布尔型和扩展的字符型之外，其他的整型可以划分为带符号的（signed）和无符号（unsigned）的两种。

类型int、short、long和long long都是带符号的，通常在这些类型名前添加unsigned就可以得到无符号类型。类型unsigned int可以缩写为unsigned。

字符型被分为了三种：char、signed char和unsigned char。尽管字符型有三种，但是字符的表现形式却只有两种：带符号的和无符号的。类型char实际上会表现为上述两种形式中的一种，具体是哪种由编译器决定。

C++标准没有规定带符号类型应如何表示，但是约定了在表示范围内正值和负值的量应该平衡，大多数现代计算机将实际的表示范围定为-2<sup>n-1</sup>至2<sup>n-1</sup>-1，其中n为类型的尺寸。



## 类型转换
算术类型支持将对象从一种给定的类型转换为另一种相关的类型。当在程序的某处我们使用了一种类型而实际对象应该取另一种类型时，程序会自动进行类型转换。

类型所能表示的值的范围决定了转换的过程：
* 当我们把一个非布尔类型的算术值赋给布尔类型时，初始值为0则结果为false，否则结果为true。
* 当我们把一个布尔值赋给非布尔类型时，初始值为false则结果为0，初始值为true则结果为1。
* 当我们把一个浮点数赋给整数类型时，进行了近似处理，结果值近将保留浮点数中小数点之前的部分。
* 当我们把一个整数值赋给浮点类型时，小数部分记为0。如果该整数所占的空间超过了浮点类型的容量，精度可能有损失。
* 当我们赋给无符号类型一个超出它表示范围的值时，结果是初始值对无符号类型表示数值总数（2<sup>n</sup>，其中n为类型的尺寸）取模后的余数。
* 当我们赋给带符号类型一个超出它表示范围的值时，结果是**未定义的（undefined）**。此时，程序可能继续工作、可能崩溃，也可能生成垃圾数据。

如果表达式里既有带符号类型又有无符号类型，当带符号类型取值为负时会出现异常结果，这是因为**带符号数会自动地转化为无符号数**。



## 字面值常量
一个形如`42`的值被称为**字面值常量（literal）**。每个字面值常量都对应一种数据类型，字面值常量的形式和值决定了它的数据类型。

### 整型字面值
我们可以讲整型字面值写作十进制数、八进制数或十六进制数的形式。以0开头的整数代表八进制数，以0x或0X开头的代表十六进制数。

整型字面量具体的数据类型由它的值和符号决定。默认情况下，十进制字面量是带符号数，八进制和十六进制字面量既可能是带符号的也可能是无符号的。十进制字面值的类型是能容纳其数值的int、long和long long中尺寸最小者，八进制和十六进制字面量的类型是能容纳其数值的int、unsigned int、long、unsigned long、long long和unsigned long long中的尺寸最小者。如果一个字面值连与之关联的最大的数据类型都放不下，将产生错误。类型short没有对应的字面值。严格来说，十进制字面值不会是负数，如果我们使用了一个形如`-42`的负十进制字面值，那个负号并不在字面值之内，它的作用仅仅是对字面值取负值而已。

### 浮点型字面值
浮点型字面值表现为一个小数或以科学计数法表示的指数，其中指数部分用E或者e标识：`3.14159`、`3.14159E0`、`0.`、`0e0`、`.001`。默认的，浮点型字面值是一个double。

### 字符和字符串字面值
由单引号括起来的一个字符称为char型字面值，双引号括起来的零个或多个字符则构成字符串型字面值。

字符串字面值的类型实际上是由常量字符构成的**数组（array）**，编译器在每个字符串的结尾处添加了一个空字符（'\0'），因此字符串字面值的实际长度要比它的内容多1。

如果两个字符串字面值位置紧邻且仅由空格、锁进和换行符分隔，则它们实际上是一个整体。当书写的字符串字面值比较长，写在一行里不太合适时，就可以采取分开书写的方式。

### 转义序列
有两类字符程序员不能直接使用：一类是**不可打印（nonprintable）**的字符，如退格或其他控制字符，因为它们没有可视的图符；另一类是在C++语言中有特殊含义的字符（单引号、双引号、问号、反斜线）。在这些情况下需要用到**转义序列（escape sequence）**，转义序列均以反斜线作为开始，C++语言规定的转义序列包括：
* 换行符：\n
* 纵向制表符：\v
* 反斜线：\\
* 回车符：\r
* 横向制表符：\t
* 退格符：\b
* 问号：\?
* 进纸符：\f
* 报警（响铃）符：\a
* 双引号：\"
* 单引号：\'

我们也可以使用泛化的转义序列，其形式是\x后紧跟1个或者多个十六进制数字，或者\后紧跟1个、2个或3个八进制数字，其中数字部分表示的是字符对应的数值（和字符集有关）。注意，如果反斜线\后面跟着的八进制数字超过3个，只有前3个数字与\构成转义序列。相反，\x要用到后面跟着的所有数字。

### 指定字面值的类型
通过添加如下表中所列前缀和后缀，可以改变整型、浮点型和字符型字面值的默认类型。

#### 字符和字符串字面值
|前缀|含义|类型|
|---|---|---|
|u|Unicode16字符|char16_t|
|U|Unicode32字符|char32_t|
|L|宽字符|wchar_t|
|u8|UTF-8（仅用于字符串字面量）|char|

#### 整型字面量
|后缀|最小匹配类型|
|---|---|
|u or U|unsigned|
|l or L|long|
|ll or LL|long long|

#### 浮点型字面值
|后缀|类型|
|---|---|
|f或F|float|
|l或L|long double|

#### 布尔字面值和指针字面值
true和false是布尔类型的字面值。

nullptr是指针字面值。
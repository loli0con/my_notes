# 物理层

### 基本概念
物理层解决如何在连接各种计算机的传输媒体上传输数据比特流，而不是指具体的传输媒体。

物理层的主要任务：确定与传输媒体的接口的一些特性
* 机械特性：接口形状，大小，引脚数目
* 电气特性
* 功能特性
* 过程特性

### 基础知识
#### 常用术语
|名词|解释|
|-----|-----|
|数据|运输消息的实体|
|信号|数据的电气或电磁的表示|
|模拟信号|代表消息的参数的取值是连续的|
|数字信号|代表消息的参数的取值是离散的|
|码元|在使用时间域的波形表示数字信号时，代表不同离散数值的基本波形。简单来说，就是一个脉冲信号，它可以携带*n*bit的数据。|

#### 信道相关概念
信道：一般用来表示向一个方向传送信息的媒体  
通信方式：
* 单工通信
* 半双工通信
* 全双工通信

#### 信号调制
1. 基带信号：来自信源的信号  
2. 基带调制：**编码**，变换后的信号仍然是基带信号
3. 带通调制：使用载波进行**调制**，把基带信号的频率范围搬移到较高的频段，并转换为模拟信号
4. 带通信号：经过载波调制后的信号

##### 编码方式
* 不归零制：正电平代表 1，负电平代表 0。
* 归零制：正脉冲代表 1，负脉冲代表 0。
* 曼彻斯特编码：位周期中心的向上跳变代表 0， 位周期中心的向下跳变代表 1。
* 差分曼彻斯特编码：在每一位的中心处始终都有跳变。位开始边界有跳变代表0，而位开始边界没有跳变代表 1。
> 曼彻斯特编码和差分曼彻斯特编码具有**自同步能力**

![物理层+截屏2021-01-31 19.35.20](https://raw.githubusercontent.com/loli0con/picgo/master/images/%E7%89%A9%E7%90%86%E5%B1%82%2B%E6%88%AA%E5%B1%8F2021-01-31%2019.35.20.png%2B2021-01-31-19-35-46)

##### 调制方法
基本的二元制调制方法有以下几种:
* **调幅**(AM):载波的振幅随基带数字信号而变化。
* **调频**(FM):载波的频率随基带数字信号而变化。
* **调相**(PM):载波的初始相位随基带数字信号而变化。

![物理层+截屏2021-01-31 19.39.42](https://raw.githubusercontent.com/loli0con/picgo/master/images/%E7%89%A9%E7%90%86%E5%B1%82%2B%E6%88%AA%E5%B1%8F2021-01-31%2019.39.42.png%2B2021-01-31-19-39-57)


#### 信道的极限容量

从概念上讲，限制码元在信道上的传输速率
的因素有以下两个:
* 信道能够通过的频率范围
* 信噪比

##### 奈氏准则
奈氏准则给出了在假定的理想条件下，为了避免码间串扰，码元的传输速率的上限值。
> 在任何信道中，码元传输的速率是有上限的，否则就会出现码间串扰的问题，使接收端对码元的判决(即识别)成为不可能。  
> 码间串扰，就好像你听别人说话，速度提高1.5-2.0倍，你还能听清，但是提高10-20倍，你就无法听清别人说什么了。

理想低通信道的最高码元传输速率=2WBaud
* W是理想低通信道的带宽，单位为HZ
* Baud是波特，是码元传输速率的单位

##### 香农公式
香农用信息论的理论推导 出了带宽受限且有高斯白噪声干扰的信道的极 限、无差错的信息传输速率(香农公式)。  
信道的极限信息传输速率 C 可表达为:   
```C = W log2(1+S/N) (bit/s)```
> 其中: W 为信道的带宽(以 Hz 为单位);  
> S 为信道内所传信号的平均功率;  
> N 为信道内部的高斯噪声功率。

### 传输媒体

#### 导向传输媒体
##### 双绞线
* 屏蔽双绞线 STP
* 无屏蔽双绞线 UTP

##### 同轴电缆
* 50欧姆 同轴电缆 —— LAN / 数字传输常用
* 75欧姆 同轴电缆 —— 有线电视 / 模拟传输常用

##### 光缆
* 多模光纤
* 单模光纤

#### 非导向传输媒体
* 短波：电离层传播
* 微波：直线传播

### 信道复用技术
 **复用** (multiplexing) 是通信技术中的基本概念，它允许用户使用一个共享信道进行通信，降低成本，提高利用率。

#### 频分复用FDM
将整个带宽分为多份，用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。频分复用的所有用户在同样的时间占用不同的带宽资源(这里的“带宽”是频率带宽而不是数据的发送速率)
![物理层+截屏2021-01-31 21.51.16](https://raw.githubusercontent.com/loli0con/picgo/master/images/%E7%89%A9%E7%90%86%E5%B1%82%2B%E6%88%AA%E5%B1%8F2021-01-31%2021.51.16.png%2B2021-01-31-21-51-44)

##### 波分复用WDM
![物理层+截屏2021-01-31 21.58.54](https://raw.githubusercontent.com/loli0con/picgo/master/images/%E7%89%A9%E7%90%86%E5%B1%82%2B%E6%88%AA%E5%B1%8F2021-01-31%2021.58.54.png%2B2021-01-31-21-59-10)

#### 时分复用TDM
* 时分复用则是将时间划分为一段段等长的时分复用帧(TDM帧)。每一个时分复用的用户在每一个TDM帧中占用固定序号的时隙。
* 每一个用户所占用的时隙是周期性地出现(其周期就是TDM帧的长度)。
* TDM信号也称为等时(isochronous)信号。
* 时分复用的所有用户是在不同的时间占用同样的频带宽度。

![物理层+截屏2021-01-31 21.55.30](https://raw.githubusercontent.com/loli0con/picgo/master/images/%E7%89%A9%E7%90%86%E5%B1%82%2B%E6%88%AA%E5%B1%8F2021-01-31%2021.55.30.png%2B2021-01-31-21-55-42)
> 时分复用可能会造成线路资源的浪费

##### 统计时分复用
![物理层+截屏2021-01-31 21.57.31](https://raw.githubusercontent.com/loli0con/picgo/master/images/%E7%89%A9%E7%90%86%E5%B1%82%2B%E6%88%AA%E5%B1%8F2021-01-31%2021.57.31.png%2B2021-01-31-21-57-44)

#### 码分复用CDM
* 每一个比特时间划分为 m 个短的间隔，称为码片 (chip)
* 每个站被指派一个唯一的 m bit 码片序列。
  * 如发送比特 1，则发送自己的 m bit 码片序列。
  * 如发送比特 0，则发送该码片序列的二进制反码。
> 例如，S 站的 8 bit 码片序列是 00011011。  
> 发送比特 1 时，就发送序列 00011011，  
> 发送比特 0 时，就发送序列 11100100。  
> S 站的码片序列:(–1 –1 –1 +1 +1 –1 +1 +1)

令向量 S 表示站 S 的码片向量，令 T 表示其他任何站的码片向量，有如下性质：
* 两个不同站的码片序列正交，就是向量S和T的规格化内积(inner product)等于0:![物理层+截屏2021-01-31 22.06.39](https://raw.githubusercontent.com/loli0con/picgo/master/images/%E7%89%A9%E7%90%86%E5%B1%82%2B%E6%88%AA%E5%B1%8F2021-01-31%2022.06.39.png%2B2021-01-31-22-06-57)

* 任何一个码片向量和该码片向量自己的规格化内积都是1。
* 一个码片向量和该码片反码的向量的规格化内积值是–1。

![物理层+截屏2021-01-31 22.17.18](https://raw.githubusercontent.com/loli0con/picgo/master/images/%E7%89%A9%E7%90%86%E5%B1%82%2B%E6%88%AA%E5%B1%8F2021-01-31%2022.17.18.png%2B2021-01-31-22-17-57)

##### 码分复用具体例子🌰
![1.物理层+截屏2021-02-01 13.31.10](https://raw.githubusercontent.com/loli0con/picgo/master/images/1.%E7%89%A9%E7%90%86%E5%B1%82%2B%E6%88%AA%E5%B1%8F2021-02-01%2013.31.10.png%2B2021-02-01-13-31-56)
这里举一个例子来说明一下码分复用：
1. 首先使用某种算法构造出4个码片序列（A、B、C、D）
2. 注意，这4个码片是符合上面提到的性质
3. 分别做规格化内积，得到
    * R·A = 1，A站收到“1”
    * R·B = -1，B站收到“0”
    * R·C = 0，C站没收到信号
    * R·D = 1，D站收到“1”


### 数字传输系统
* 脉码调制 PCM 体制最初是为了在电话局之间的中继线上传送多路的电话。
* 与模拟通信相比，数字通信无论是在传输质量上还是 经济上都有明显的优势。
* 在早期电话网中，从市话局到用户电话机的用户线是采用最廉价的双绞线电缆，而长途干线采用的是频分复用 FDM 的模拟传输方式。
* 目前，长途干线大都采用时分复用 PCM 的数字传输方式。

### 带宽接入技术

#### ADSL技术
* 用数字技术对现有的模拟电话用户线进行改造，使它能够承载宽带业务。
* ADSL 技术就把 0~4 kHz 低端频谱留给传统电话使用，而把原来没有被利用的高端频谱留给用户上网使用。

![物理层+截屏2021-01-31 23.20.49](https://raw.githubusercontent.com/loli0con/picgo/master/images/%E7%89%A9%E7%90%86%E5%B1%82%2B%E6%88%AA%E5%B1%8F2021-01-31%2023.20.49.png%2B2021-01-31-23-21-08)

#### 光纤同轴混合网(HFC网)
* HFC网是在目前覆盖面很广的有线电视网CATV的基础上开发的一种居民宽带接入网。
* HFC网将原CATV网中的同轴电缆主干部分改换为光纤，并使用模拟光纤技术。

![物理层+截屏2021-01-31 23.24.39](https://raw.githubusercontent.com/loli0con/picgo/master/images/%E7%89%A9%E7%90%86%E5%B1%82%2B%E6%88%AA%E5%B1%8F2021-01-31%2023.24.39.png%2B2021-01-31-23-24-51)

![物理层+截屏2021-01-31 23.25.31](https://raw.githubusercontent.com/loli0con/picgo/master/images/%E7%89%A9%E7%90%86%E5%B1%82%2B%E6%88%AA%E5%B1%8F2021-01-31%2023.25.31.png%2B2021-01-31-23-25-43)

#### FTTx技术
FTTx是一种实现宽带居民接入网的方案，代表多种宽带光纤接入方式。
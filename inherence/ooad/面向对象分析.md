# 面向对象分析

## 领域模型
**概念模型**表示了问题领域的的“概念”及其关系，也称为**领域模型**。UML图形表示为“没有定义操作的类图”，它能够显示：概念、概念之间的关系、概念的属性。

### LRG
LRG:，lower representational gap，低表示差异：
* 概念类与软件类，有很大的相似度，概念类可以直接作为软件类
* 概念类没有操作、软件类有操作

## 面向对象分析

### 分析的定义
在软件工程，分析是一种过程，把用户需求转变为系统需求。系统规格说明，也称为逻辑结构，是开发人员眼中的系统。大的、复杂系统的开发，有两种主要的分析方法：
* 面向功能的分析：在抽象层面，面向功能的分析法用得多一点（把系统分成模块）
* 面向对象的分析：在模块层面，面向对象的分析法用得多一点

面向对象分析与结构化分析方法之间的最大差异是：根据对象划分系统 和 根据功能划分系统

### 分析的步骤
1. 识别对象
2. 组织对象
3. 定义对象之间的关系
4. 定义对象的操作
5. 定义对象内部细节

### 分析的方法
1. **概念模型**，又称“名词法”
2. 分析模型
3. CRC法，类/职责/协作

#### 名词法
使用名词法定义概念类：
1. 重用或者修改已有的模型
2. 借助行业、公司内部法的“概念类列表”
3. 在需求描述中查寻名词(短语)
   1. 步骤：
      1. 在问题领域的文本描述中，标识出名词、名词短语，把它们作为候选的概念类或者属性。
      2. 对发现的名称(短语)进行分析，辨别是合适的概念类吗?概念可以合并吗?等等
      3. 定义概念类之间的关系
      4. 定义概念类的属性
   2. 注意：
      1. 不能机械地转换“名称 ----> 概念类”
      2. 自然语言描述的文字有歧义、重复、一词多意、一意多词等，要仔细分析
      3. 比如英语，复数一般就不需要了，students\student, 只要student即可。

#### 分析模型法
分析模型法是用于描述系统规格说明的；一个健壮、稳定的模型，必须与实现环境无关，实现环境的任何变化，不会影响到系统的逻辑结构；分析模型能够关注到系统的信息、行为、展示(输入/出)等特性。

分析模型从三个面（信息information、行为behaviour、展示presentation）去分析系统里面有哪些概念，用到了如下三种符号：
![面向对象分析+20220220171236](https://raw.githubusercontent.com/loli0con/picgo/master/images/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%88%86%E6%9E%90%2B20220220171236.png%2B2022-02-20-17-12-38)

#### CRC法
CRC法是一种发现概念类并分配职责的途径，它代表三个含义：
* Classes (of objects) 类
* Responsibilities (of the objects in each class) 职责
* Collaborations (with objects in other classes) 协作/关联

##### CRC卡片
每张卡片代表一个类，每张卡片上写出这个类承担的职责、与其合作交互的其他类名。

![面向对象分析+20220223124438](https://raw.githubusercontent.com/loli0con/picgo/master/images/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%88%86%E6%9E%90%2B20220223124438.png%2B2022-02-23-12-44-38)

##### CRC流程
![面向对象分析+20220223125400](https://raw.githubusercontent.com/loli0con/picgo/master/images/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%88%86%E6%9E%90%2B20220223125400.png%2B2022-02-23-12-54-02)

详细的步骤如下：
1. 查看**需求描述**
2. 经过头脑风暴，列出一群概念，即**建议的概念类**
3. 将建议的概念类成分，关键的类、无关的类、待定的类，**标识核心概念类**
4. **明确系统范围**
5. **去掉不必要的核心类**
   1. 进一步检查，发现这个类不适合应用系统
   2. 检查那些与系统相关、但是在系统外部的类；系统需要有接口与它们通信，但不需要在系统内部为它们建模
   3. 合并同义词，同一个概念的不同名字
   4. 辨析一个概念是属性还是类；符合以下两点的类，一般是属性：
      1. 它不做具体的事情
      2. 它不能改变状态
6. **为核心类分配职责**
   1. 为概念类定义协作者，此过程与定义职责的过程是交错进行的
   2. 集中在 what，而不是 how
   3. 如果大多数职责都归属于少数几个类，则设计出了点问题：
      1. 没有充分利用多态、封装等特性
      2. 很多类的功能退化为“记录信息”，只知道自己的信息
7. **分配协作**
   1. 标识类之间的关系
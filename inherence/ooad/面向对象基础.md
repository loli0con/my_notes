# 面向对象

## 面向对象思想的基本概念

### 类 与 对象

#### 定义
* 类Class：
  * 一个类是<u>共享相同属性、操作、方法、关系或行为的一组对象</u>的描述符
  * 定义了对象群体的逻辑结构，包括属性和操作
  * 系统运行时，类作为产生对象的模版，在物理层面是不存在的
* 对象Object：
  * 一个对象是根据一个类创建的实例。类定一个实例的行为和信息结构，对象的当前状态（实例变量的取值）取决于作用于对该象的操作。
  * 系统运行时必须为每一个需要的对象分配内存、保存数据
  * 对象存在于物理层面，每个对象都有自己的数据空间（内存）
  * 所有的对象共享同一块代码空间

#### 概念解析
**类/对象** = **属性Attribute/数据Data/状态state/信息information** + **操作operation/方法Method/行为behaviour/职责responsibility**

### 消息
做出非凡和可成长的系统的重中之重是设计好模块之间的如何通讯，而不是模块应具有什么样的内部属性和行为方法，应该关注消息机制和模块间松耦合和交互。

消息是对象之间的一种交流手段，所有相关对象之间相互协作完成软件功能。





## 面向对象的思考方式
面向对象的思考方式：**观察到一切都是对象**。软件系统是由多个对象组成，对象间通过消息互相交流、共同协作，以完成整个系统的功能。

### 定义
在对世界/系统进行观察/建模的时候，把它们看成是由一系列相互交流、互为影响的对象集。即：
1. 世界是由相互作用的对象组成的
2. 描述与构建由对象组成的系统

### 面向对象 与 面向过程
* **面向对象**适合解决不确定的事件、创新性的事件，面向对象致力于将数据和方法先做一个封装，面向对象解决方法通过信道传递对象（数据+对数据的处理方法）。
* **面向过程**适合处理已知的事实、组织规划几乎没有重要条件仍未知的场景，面向过程侧重于考虑方法的编写，面向过程解决方法通过信道传递数据，服务器端需要有专门的工具对接受的数据进行处理。

### 主要概念
* 面向对象分析 OO analysis
* 面向对象设计 OO design
* 设计模式 design patterns
* 统一建模语言 the Unified Modeling Language（UML）
* 面向对象编程 OO programming
  * various OO programming languages

**最重要的是以面向对象的思维方式去思考要解决的问题**

### 核心特性
* 对象Object/类Class
* 方法Method/消息Message
* 封装Encapsulation
* 继承Inheritance
* 接口Interface/实现Implement
* 多态Polymorphism
* 聚合Aggregation/组合Composition
* 抽象Abstraction
* 面向对象原则OO principle
* 设计模式Design Pattern

#### 封装-Encapsulation
封装隐藏了一个对象的实现细节，内部的状态也不为其他对象所访问，对象的数据只能通过接口去访问。

封装使得对象可以被看成一个“黑盒子”，保护了内部的数据。一个对象实现方法的改变，不影响其他相关对象，对象间通过“接口”进行通信。即：保护隐私、保护数据安全、隔离复杂度。

封装有四种方式：
* public
* private
* protected
* package

#### 继承-Inheritance
is-a关系

#### 多态-Polymorphism
多态的本意为：**有多种形态（“Having many forms”）**。
* 当一个类从另一个类继承而来，多态使得子类可以代替父类
* 消息发送方不需要知道消息接收方属于哪个子类
* 同一类族的接收者可以按自己的方式处理消息
  * 同一类族的接收者可以按自己的方式处理同一个消息
  * 有多种对象可以按自己的方式处理相同的数据

多态的核心思想，同时也是设计模式的基础：使用指向父类的指针或者引用，能够调用子类的对象。

#### 聚合/组合-Aggregation/Composition
has关系

聚合关系的一个变种，称为组合：整体控制着部分的生命，部分只能存在于整体之中。有些时候聚合和组合的关系不是很明确。

#### 接口/实现-Interface/Implement
对于软件系统，其内部是由大量的相互关联的类构成的，当对其中某一个类的局部进行修改的时候，不能影响其他的类。

因此，通过接口来描述一个类如何与其他类进行交互，通过实现来完成接口所定义的功能。

#### 抽象-Abstraction
抽象是一种思维方式、一种思维能力：客观世界的事物由各种各样的实体(对象)构成，每个对象都有各自的内部状态和运动(状态)规则，根据对象的属性和运动规则的相似性可以将对象分类。

抽象的定义：抽象表示一个对象与其他所有对象相区别的基本特征，因此提供了同观察者视角有关的清晰定义的概念界限。简单地讲，抽象就是过滤掉对象的一部分特性和操作，直到只剩下你所需要的属性和操作。

抽象是面向对象领域发现类的主要方法。


## 面向对象的重点
系统设计中的关键问题：
1. 应该如何为对象类分配职责
2. 对象之间应该如何协作
3. 什么样的类应该做什么样的事情
4. 某些针对设计问题的、经过反复验证的解决方案，可以(或者已经)被表示成为最佳实践的原则、启示或者模式(pattern)，如何使用、如何自创

面向对象开发需要掌握的极为重要的能力——为软件对象分配职责：
1. 职责驱动的设计
2. 在设计的过程中完成职责分配
3. 遵循GRASP原则（General Responsibility Assignment Software Pattern 通用职责分配软件模式）
4. 成功的设计可以成为模式

分析和设计：
* 分析是发现并描述问题领域里的对象或者概念(概念类)的过程
* 设计是定义软件对象、以及它们之间如何协作完成功能(设计类)的过程

OOAD最基本的过程：
1. 定义用例
2. 定义领域模型
3. 定义交互图
4. 定义设计类图